# Send a call invitation

- - -

## Overview

This interface is used to create a call invitation in **general** mode.

After the call invitation is successfully created, the user who sent the invitation (caller) will receive a notification that the invitation has been created through the following ZIM SDK callback interface:

<table>
<tbody><tr>
<th>iOS</th>
<th>Android</th>
<th>macOS</th>
<th>Windows</th>
</tr>
<tr>
<td><a href="/article/api?doc=zim_API~objective-c_ios~protocol~ZIMEventHandler#zim-call-invitation-created-call-id" rel="noreferrer noopenner">callInvitationCreated</a></td>
<td><a href="/article/api?doc=zim_API~java_android~class~ZIMEventHandler#on-call-invitation-created" rel="noreferrer noopenner">onCallInvitationCreated</a></td>
<td><a href="/article/api?doc=zim_API~objective-c_macos~protocol~ZIMEventHandler#zim-call-invitation-created-call-id" rel="noreferrer noopenner">callInvitationCreated</a></td>
<td><a href="/article/api?doc=zim_API~cpp_windows~class~ZIMEventHandler#on-call-invitation-created" rel="noreferrer noopenner">onCallInvitationCreated</a></td>
</tr>
<tr>
<th>Web</th>
<th>Flutter</th>
<th>React Native</th>
<th></th>
</tr>
<tr>
<td><a href="/article/api?doc=zim_API~javascript_web~interface~ZIMEventHandler#call-invitation-created" rel="noreferrer noopenner">callInvitationCreated</a></td>
<td><a href="https://pub.dev/documentation/zego_zim/latest/zego_zim/ZIMEventHandler/onCallInvitationCreated.html" rel="noreferrer noopenner">onCallInvitationCreated</a></td>
<td><a href="/article/api?doc=zim_API~javascript_react-native~interface~ZIMEventHandler#call-invitation-created" rel="noreferrer noopenner">callInvitationCreated</a></td>
<td></td>
</tr>
</tbody></table>

The user who is invited (callee) will receive a notification of the invitation:

<table>
<tbody><tr>
<th>iOS</th>
<th>Android</th>
<th>macOS</th>
<th>Windows</th>
</tr>
<tr>
<td><a href="/article/api?doc=zim_API~objective-c_ios~protocol~ZIMEventHandler#zim-call-invitation-received-call-id" rel="noreferrer noopenner">callInvitationReceived</a></td>
<td><a href="/article/api?doc=zim_API~java_android~class~ZIMEventHandler#on-call-invitation-received" rel="noreferrer noopenner">onCallInvitationReceived</a></td>
<td><a href="/article/api?doc=zim_API~objective-c_macos~protocol~ZIMEventHandler#zim-call-invitation-received-call-id" rel="noreferrer noopenner">callInvitationReceived</a></td>
<td><a href="/article/api?doc=zim_API~cpp_windows~class~ZIMEventHandler#on-call-invitation-received" rel="noreferrer noopenner">onCallInvitationReceived</a></td>
</tr>
<tr>
<th>Web</th>
<th>Flutter</th>
<th>Unity3D</th>
<th>React Native</th>
</tr>
<tr>
<td><a href="/article/api?doc=zim_API~javascript_web~interface~ZIMEventHandler#call-invitation-received" rel="noreferrer noopenner">callInvitationReceived</a></td>
<td><a href="https://pub.dev/documentation/zego_zim/latest/zego_zim/ZIMEventHandler/onCallInvitationReceived.html">onCallInvitationReceived</a></td>
<td><a href="/article/api?doc=zim_API~cs_unity3d~class~ZIMEventHandler#on-call-invitation-received" rel="noreferrer noopenner">OnCallInvitationReceived</a></td>
<td><a href="/article/api?doc=zim_API~javascript_react-native~interface~ZIMEventHandler#call-invitation-received" rel="noreferrer noopenner">callInvitationReceived</a></td>
</tr>
</tbody></table>

## Request method and endpoint

- Request method: POST
- Request endpoint: `https://zim-api.zego.im/?Action=CallInvite`
- Protocol: HTTPS
- Rate limit: 20 times/second

## Request parameters

The following list only shows the request parameters for this interface and some public parameters. For a complete list of public parameters, please refer to [Accessing Server APIs - Public parameters](../Accessing%20Server%20APIs.mdx#public-parameters).

<table>

<tbody><tr data-row-level="1">
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
<tr data-row-level="2">
<td>FromUserId</td>
<td>String</td>
<td>Yes</td>
<td>The user ID of the caller (registered).</td>
</tr>
<tr data-row-level="3">
<td>UserIds</td>
<td>Array of String</td>
<td>Yes</td>
<td>A list of user IDs of the callees, with a maximum of 9 users. If you need to increase the limit, please contact ZEGOCLOUD technical support.</td>
</tr>
<tr data-row-level="4">
<td>Timeout</td>
<td>Number</td>
<td>No</td>
<td>The call timeout period, in seconds, with a value range of (0, 600]. If the value is 0 or empty, the value will be 90 by 90.</td>
</tr>
<tr data-row-level="5">
<td>ExtendedData</td>
<td>String</td>
<td>No</td>
<td>The extended field, with a maximum length of 2 KB.</td>
</tr>
<tr data-row-level="6">
<td>OfflinePush</td>
<td>Object</td>
<td>Yes</td>
<td>Offline push configuration, please refer to [MessageBody Introduction](../Messaging/MessageBody%20Introduction.mdx) for the details of offline push parameter.</td>
</tr>
</tbody></table>

<Note title="Note">

`FromUserId` and `UserIds` only support numbers, English characters, and the following special characters: {"'!', '#', '$', '%', '&', '(', ')', '+', '', ':', ';', '<', '=', '.', '>', '?', '@', '[', ']', '^', '_', ' ', '{', '}', '|', '~'"}.
</Note>


## Sample request

- Request URL:

   ```json
   https://zim-api.zego.im/?Action=CallInvite
   &<Public Parameters>
   ```

- Request Body:

    ```json
    {
        "FromUserId": "user0",
        "UserIds": [
            "uid1",
            "uid2"
        ],
        "Timeout": 90,
        "ExtendedData": "ExtendedData",
        "OfflinePush": {
            "Enable": 1,
            "Title": "title",
            "Content": "content",
            "Payload": "payload"
        }
    }
    ```

## Response Parameters

<table class="collapsible-table" >
<tbody><tr data-row-level="1">
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
<tr data-row-level="2">
<td>Code</td>
<td>Number</td>
<td>The return code.</td>
</tr>
<tr data-row-level="3">
<td>Message</td>
<td>String</td>
<td>The description of the operation result.</td>
</tr>
<tr data-row-level="4">
<td>RequestId</td>
<td>String</td>
<td>The request ID.</td>
</tr>
<tr data-row-level="5">
<td>CallId</td>
<td>String</td>
<td>The call ID.</td>
</tr>
<tr data-row-level="6">
<td>CreateTime</td>
<td>Number</td>
<td>The timestamp when the call invitation was created.</td>
</tr>
<tr data-row-level="7" data-row-child="true">
<td>ErrorUsers</td>
<td>Array of Object</td>
<td>
Information of users who failed to be invited.
<ul><li>
Code is 0:
<ul>
<li>ErrorUsers is empty, indicating that the invitation was successfully sent to all specified users.</li>
<li>ErrorUsers is not empty, indicating that the invitation failed to be sent to some specified users. Please refer to SubCode for handling.</li>
</ul>
</li>
<li>
Code is not 0:
<ul>
<li>ErrorUsers is empty, indicating parameter error, interface rate limit, or system error.</li>
<li>ErrorUsers is not empty, indicating that the invitation failed to be sent to all specified users.</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr data-row-level="7-1">
<td>└UserId</td>
<td>String</td>
<td>The ID of the user who failed to be invited.</td>
</tr>
<tr data-row-level="7-2">
<td>└SubCode</td>
<td>Number</td>
<td>The specific return code for the failure.</td>
</tr>
</tbody></table>


## Response Example

```json
{
    "Code": 0,
    "Message": "success",
    "RequestId": "343649807833778782",
    "CallId": "12261423186766631832",
    "CreateTime": "1713249504000",
    "ErrorUsers":[
        {
            "UserId": "uid2",
            "SubCode": 660500002
        }
    ] 
}
```

## Return Codes

The following list only shows the return codes related to the business logic of the interface. For a complete list of return codes, please refer to [Return codes](../Return%20codes.mdx).

<table>
<tbody><tr>
<th>Return Code</th>
<th>Description</th>
<th>Solution</th>
</tr>
<tr>
<td>660000002</td>
<td>Invalid parameter.</td>
<td>Check the input parameter.</td>
</tr>
<tr>
<td>660300005</td>
<td>The QPS exceeds the AppID level limit.</td>
<td>Try again later.</td>
</tr>
<tr>
<td>660500002</td>
<td>The operator is not registered.</td>
<td>Register the operator.</td>
</tr>
<tr>
<td>660900003</td>
<td>All callees must be registered.</td>
<td>Check the registration status of the callees or try again later.</td>
</tr>
<tr>
<td>660900007</td>
<td>The length of the callees list (<code>UserIds</code>) exceeds the limit.</td>
<td>Decrease the callees or contact ZEGOCLOUD technical support to increase the limit.</td>
</tr>
</tbody></table>
