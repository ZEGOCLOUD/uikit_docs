#### 1. **什么是分层视频编码（H.264 SVC）和视频大小流编码（H.264 DualStream），有什么联系和区别？**

- 分层视频编码（H.264 SVC，H.264 Scalable Video Coding）
    H.264 SVC 是 H.264 AVC 的扩展，支持具有分层特性的码流，在 2007 年成为 ITU 的正式编码标准。由于 H.264 SVC 的标准较为复杂，不同的编码器的实现方式和实现程度不一样，互通性较差，绝大多数硬件编码器都不支持 H.264 SVC。

- 视频大小流编码
    视频大小流编码参考了 H.264 SVC 的理念，通过对视频码流分层，保障不同网络和设备性能的终端流畅的体验。

与 H.264 SVC 不同，视频大小流编码通过启动两个编码器分别编出不同的参数的码流，作为码流的基本层和扩展层。基本层和扩展层的编码过程相互独立，与 H.264 AVC 一致，绝大多数软件和硬件编码器都可以使用，且规避了 H.264 SVC 无法使用硬件编码以及软件编码器支持不够丰富的问题。

分层视频编码和视频大小流编码的目的都是为了将视频码流分为基本层和扩展层，对于开发者来说，拉流端的调用流程没有差异，推流端在选择编码方式时设置的枚举值有一定差异。

用户在接收端拉流前，根据自己的网络状况，可以调用 `setPlayStreamVideoType` 设置为 `ZegoVideoStreamTypeSMALL`（基本层）或者 `ZegoVideoStreamTypeBIG`（扩展层），也可以设置为 `ZegoVideoStreamTypeDEFAULT`，让 ZEGO 帮您自动选择。



#### 2. **分层视频编码和视频大小流编码，拉流端拉取的基本层和扩展层码率、分辨率等参数有区别吗？**

分层视频编码和视频大小流编码，基本层的分辨率宽高分别都是扩展层的 50% ，基本层的码率大约为拉取扩展层码率的 25% ，帧率保持一致。

<div class="mk-warning">

分层视频编码和视频大小流编码只会拉取一层，网络情况良好时，只拉扩展层，网络情况不好时，只拉取基础层。
</div>


例如，用户设置编码分辨率为 “800 × 600”，则扩展层分辨率为 “800 × 600”，基本层分辨率为 “400 × 300”。

#### 3. **转推或直推 CDN，观众从 CDN 上拉流，分层视频编码和大小流是否有效？从 CDN 拉取的流码率、分辨率是多少？**

- 分层视频编码和视频大小流编码使用的是 ZEGO 的私有协议，拉流端只有从 ZEGO 服务器上才能拉取到不同分层的视频流。

- 转推 CDN 场景下，推流端推送到 ZEGO 服务器的流可以使用分层视频编码或视频大小流编码，从 ZEGO 服务器也可以拉取到分层的码流。但是 ZEGO 服务器转推到 CDN 服务器的流无法使用分层视频编码/视频大小流编码，而会是高质量的流。从 CDN 拉取的流与扩展层的码率、分辨率一致。

- 直推 CDN 场景下，由于不经过 ZEGO 服务器，所以码流的分层无效。从 CDN 拉取的流的分辨率和码率与推流用户设置的分辨率和码率一致。

#### 4. **分层视频编码和视频大小流编码的优缺点?**

| 功能| 优点| 缺点 |
| -- | -- | -- |
| 分层视频编码 | <ul><li> 分层视频编码可以根据需要产生不同的码流或者提取出不同的码流，使用分层视频编码实现一次编码比用普通编码方式编码多次更高效。</li><li>分层视频编码应用更灵活。</li><li>分层视频编码网络适应性更强。</li></ul>| <ul><li>压缩效率稍低：在同样的条件下，分层视频编码比普通编码方式的压缩效率要低 20% 左右，也就是说要达到和普通编码方式相同的视频质量，分层视频编码的码率要比普通编码方式多 20%，分层数越多，效率下降越多。（目前 SDK 只支持 1 路基本层和 1 路扩展层）</li><li>编码效率低：分层视频编码在同样的条件下，比普通编码方式的编码计算复杂度高，所以编码效率相比普通编码方式约低 10%。</li><li>不支持硬件编码：分层视频编码不支持硬件编码，对 CPU 的性能负担较大，支持硬件解码。</li><li>支持的编码器较少，目前只有 openH264 编码器支持。</li></ul> |
| 视频大小流编码 |<ul><li>可以使用硬件编码，减少 CPU 性能负担。</li><li>可扩展性更好，未来可以支持多种编码标准。</li><li>通用性更好，主流软硬件编码器都支持。</li></ul> | 使用软件编码时，性能消耗略大于分层视频编码。|
