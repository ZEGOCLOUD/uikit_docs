# Message component

import ZIM_ZIMKit_message_info from "/snippets/uikit/in_app_chat/ZIM_ZIMKit_message_info-en.mdx";

<ZIM_ZIMKit_message_info />

<Frame width="200" height="auto" caption="">
    <img src="https://media-resource.spreading.io/docuo/workspace735/535aa5d0e4329361d2ee094d9a68f56d/f2774e4b3b.gif" alt="ce389206-8c2f-41e0-9072-eaa39bbc431f.gif"/>
</Frame>

## Integrate the message component into your project

### Prerequisites

import ZIM_ZIMKIt_component_Prefix_info_New from "/snippets/uikit/in_app_chat/ZIM_ZIMKIt_component_Prefix_info_New-en.mdx";

<ZIM_ZIMKIt_component_Prefix_info_New />

###  Show the message component

```swift ViewController.swift {1,2,13-18}
import UIKit
import ZIMKit

/// your ViewController.swift
class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()
        
    }
    
    /// Call the following method to display the message component after login succeeded.
    func showMessageListVC() {
        let conversationID = "xxx"  // Conversation ID. For one-on-one chats, it refers to the peer's userID. For group chats, it refers to the GroupID. 
        let type: ConversationType = .peer // Conversation type (one-on-one chats or group chats). 
        let messageVC = ZIMKitMessagesListVC(conversationID: conversationID, type: type)
        navigationController?.pushViewController(messageVC, animated: true)
    }
}
```


## Customize features

If the default message-relevant features and behaviors don't fully meet your needs, we allow you to flexibly customize those through the config we mentioned in this section.

<Accordion title="Audio and video calls" defaultOpen="false">

For example, when you want to add audio and video call buttons in the bottom toolbar. To know more details, please refer to<a href="../04-Advanced%20features/01-Use%20in%20conjunction%20with%20Call%20Kit.mdx">Used with Audio and Video Call UIKit</a>.
```swift ViewController.swift {48,49}
import UIKit
import ZIMKit

class ViewController: UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()

        // init ZIMKit 
        let config = ZIMKitConfig()
        let call:ZegoUIKitPrebuiltCallInvitationConfig = ZegoUIKitPrebuiltCallInvitationConfig(notifyWhenAppRunningInBackgroundOrQuit: true, isSandboxEnvironment: true, certificateIndex: .firstCertificate)
        let callConfig: ZegoCallPluginConfig = ZegoCallPluginConfig(invitationConfig: call, resourceID: "zegouikit_call")

        config.callPluginConfig = callConfig
        config.bottomConfig.expandButtons.append(.voiceCall)
        config.bottomConfig.expandButtons.append(.videoCall)
        ZIMKit.initWith(appID: KeyCenter.appID(), appSign: KeyCenter.appSign(), config: config)


        // After loading the view, perform other additional settings.
        let messageVC = ZIMKitMessagesListVC(conversationID: "conversationID", type: .peer)
        
        // If you integrate ZimkitConVersationListvc, you can set and listen to delegate to receive notifications related to message -related notifications.
        let conversationVC = ZIMKitConversationListVC()
        conversationVC.delegate = self
    }
}
```

</Accordion>

<Accordion title="Custom bottom toolbar button

" defaultOpen="false">

To customize the button on the bottom toolbar, you can use the `smallButtons` and `expandButtons` configuration:

The following is the reference code:

```swift
// smallButtons The bottom toolbar button configuration
config.bottomConfig.smallButtons.append(.takePhoto)      
// smallButtons by default includes .expand. If you modify smallButtons and also want to display the configuration UI for expandButtons, please make sure that .expand is included in smallButtons.
// config.bottomConfig.smallButtons.append(.expand)
config.bottomConfig.expandButtons.append(.voiceCall)  
```

</Accordion>

<Accordion title="Customize long-press message operations" defaultOpen="false">

To customize what happens after a message is long pressed, you can configure it using 'ZIMKitMessageConfig' :

The system includes text messages, picture messages, video messages, file messages, voice messages, and merge and forward messages

Here is the reference code:

```swift
let config = ZIMKitConfig()
config.messageConfig.textMessageConfig.operations = [.copy, .reply, .forward, .multipleChoice, .delete, .revoke, .reaction] 
```

</Accordion>

<Accordion title="Custom text input box default text" defaultOpen="false">
To customize the default prompt text for the bottom input box, you can configure it using 'inputPlaceholder'

Here is the reference code:
```swift
let config = ZIMKitConfig()
config.inputPlaceholder =  NSAttributedString(string: "ËØ∑ËæìÂÖ•", attributes: [NSAttributedString.Key.foregroundColor: UIColor.black, 
                                                                            NSAttributedString.Key.font: UIFont.systemFont(ofSize: 15)])
```
</Accordion>

<Accordion title="Customize the top navigation bar" defaultOpen="false">
Navigation bar to customize the answer page, you can use ` ZIMKitMessagesListVCDelegate ` configured

Here is the reference code:
```swift
 
    func getMessageListHeaderBar(_ messageListVC: ZIMKitMessagesListVC) -> ZIMKitHeaderBar? {
        var header: ZIMKitHeaderBar = ZIMKitHeaderBar()
        header.titleView = UIView()
        let button:UIBarButtonItem = UIBarButtonItem(customView:UIButton(type: .infoLight))

        header.leftItems: [UIBarButtonItem] = [button]
        header.rightItems: [UIBarButtonItem] = [button]
        return header
    }
    
    func getMessageListHeaderCustomerview(_ messageListVC: ZIMKitMessagesListVC) -> UIView?
        let view = UIView().withoutAutoresizingMaskConstraints
        let button = UIButton(type: .contactAdd)
        button.frame = CGRect(x: 10, y: 10, width: 30, height: 30)
        button.addTarget(self, action: #selector(customerButtonClick(_:)), for: .touchUpInside)
        view.addSubview(button)
    return view
``` 
</Accordion>

<Accordion title="Destruction of the listening session page" defaultOpen="false">
Want to listen to answer page, do some operation, you can use ` ZIMKitMessagesListVCDelegate ` configured

Here is the reference code:
```swift
func messageListViewWillDisappear() {
// do something
}
```
</Accordion>

<Accordion title="Customize the emoji panel" defaultOpen="false">
To change the default emojis, you can configure them through 'emojis'

Here is the reference code:
```swift
let config = ZIMKitConfig()
config.bottomConfig.emojis = ["üòÄ", "üòÉ", "üòÑ", "üòÅ", "üòÜ", "üòÖ", "üòÇ"]
```
</Accordion>
